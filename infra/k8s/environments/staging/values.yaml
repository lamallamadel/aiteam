global:
  environment: staging
  region: us-east-1

replicaCount:
  orchestrator: 2
  frontend: 1

image:
  orchestrator:
    repository: atlasia/ai-orchestrator
    tag: "staging-latest"
  frontend:
    repository: atlasia/frontend
    tag: "staging-latest"

orchestrator:
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 85
  podDisruptionBudget:
    enabled: true
    minAvailable: 1

frontend:
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"

postgresql:
  enabled: true
  primary:
    persistence:
      enabled: true
      size: 20Gi
    resources:
      requests:
        memory: "128Mi"
        cpu: "125m"
      limits:
        memory: "512Mi"
        cpu: "500m"

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-staging"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    nginx.ingress.kubernetes.io/rate-limit: "50"
  hosts:
    - host: staging.atlasia.example.com
      paths:
        - path: /api
          pathType: Prefix
          backend: orchestrator
        - path: /actuator
          pathType: Prefix
          backend: orchestrator
        - path: /ws
          pathType: Prefix
          backend: orchestrator
        - path: /
          pathType: Prefix
          backend: frontend
  tls:
    - secretName: atlasia-staging-tls
      hosts:
        - staging.atlasia.example.com

config:
  region: us-east-1
  cors:
    allowedOrigins: "https://staging.atlasia.example.com"
  tracing:
    samplingProbability: "0.5"
  crdt:
    meshPeers: ""

monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s

nodeSelector:
  workload-type: staging

tolerations:
  - key: "staging"
    operator: "Equal"
    value: "true"
    effect: "NoSchedule"
