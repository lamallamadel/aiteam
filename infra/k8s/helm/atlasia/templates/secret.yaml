{{- if not .Values.secrets.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "atlasia.fullname" . }}-secrets
  labels:
    {{- include "atlasia.labels" . | nindent 4 }}
type: Opaque
stringData:
  orchestrator-token: {{ .Values.secrets.orchestratorToken | required ".Values.secrets.orchestratorToken is required" | quote }}
  db-password: {{ .Values.secrets.dbPassword | required ".Values.secrets.dbPassword is required" | quote }}
  jwt-secret: {{ .Values.secrets.jwtSecret | required ".Values.secrets.jwtSecret is required" | quote }}
  encryption-key: {{ .Values.secrets.encryptionKey | required ".Values.secrets.encryptionKey is required" | quote }}
  vault-token: {{ .Values.secrets.vaultToken | default "" | quote }}
  llm-api-key: {{ .Values.secrets.llmApiKey | required ".Values.secrets.llmApiKey is required" | quote }}
  llm-fallback-api-key: {{ .Values.secrets.llmFallbackApiKey | default "" | quote }}
  github-webhook-secret: {{ .Values.secrets.githubWebhookSecret | default "" | quote }}
  github-private-key-path: {{ .Values.secrets.githubPrivateKeyPath | default "" | quote }}
  oauth2-github-client-id: {{ .Values.secrets.oauth2.github.clientId | default "" | quote }}
  oauth2-github-client-secret: {{ .Values.secrets.oauth2.github.clientSecret | default "" | quote }}
  oauth2-google-client-id: {{ .Values.secrets.oauth2.google.clientId | default "" | quote }}
  oauth2-google-client-secret: {{ .Values.secrets.oauth2.google.clientSecret | default "" | quote }}
  oauth2-gitlab-client-id: {{ .Values.secrets.oauth2.gitlab.clientId | default "" | quote }}
  oauth2-gitlab-client-secret: {{ .Values.secrets.oauth2.gitlab.clientSecret | default "" | quote }}
  mail-username: {{ .Values.secrets.mail.username | default "" | quote }}
  mail-password: {{ .Values.secrets.mail.password | default "" | quote }}
{{- end }}
---
{{- if .Values.postgresql.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "atlasia.fullname" . }}-postgresql-secret
  labels:
    {{- include "atlasia.labels" . | nindent 4 }}
type: Opaque
stringData:
  postgres-password: {{ .Values.secrets.dbPassword | required ".Values.secrets.dbPassword is required" | quote }}
  password: {{ .Values.secrets.dbPassword | required ".Values.secrets.dbPassword is required" | quote }}
{{- end }}
