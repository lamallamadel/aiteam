{
  "description": "Contract for multi-capability agent discovery with scoring",
  "request": {
    "method": "POST",
    "url": "/api/a2a/discover",
    "headers": {
      "Authorization": "Bearer test-token",
      "Content-Type": "application/json"
    },
    "body": {
      "requiredCapabilities": ["code_generation", "security_review", "code_quality"]
    },
    "matchers": {
      "body": [
        {
          "path": "$.requiredCapabilities",
          "type": "by_type",
          "minOccurrence": 1
        }
      ]
    }
  },
  "response": {
    "status": 200,
    "headers": {
      "Content-Type": "application/json"
    },
    "body": [
      {
        "name": "developer-v1",
        "version": "1.0",
        "role": "DEVELOPER",
        "vendor": "atlasia",
        "description": "Developer agent: generates code, runs security review, and commits changes",
        "capabilities": ["code_generation", "security_review", "code_quality", "multi_file_commit"],
        "outputArtifactKey": "code_changes",
        "mcpServers": [],
        "constraints": {
          "maxTokens": 8192,
          "maxDurationMs": 300000,
          "costBudgetUsd": 0.10
        },
        "transport": "local",
        "healthEndpoint": null,
        "status": "active"
      }
    ],
    "matchers": {
      "body": [
        {
          "path": "$",
          "type": "by_type",
          "minOccurrence": 0
        },
        {
          "path": "$[*].name",
          "type": "by_regex",
          "value": "[a-zA-Z0-9\\-_]+"
        },
        {
          "path": "$[*].version",
          "type": "by_regex",
          "value": "[0-9]+\\.[0-9]+(\\.[0-9]+)?"
        },
        {
          "path": "$[*].role",
          "type": "by_regex",
          "value": "[A-Z_]+"
        },
        {
          "path": "$[*].capabilities",
          "type": "by_type",
          "minOccurrence": 1
        },
        {
          "path": "$[*].constraints.maxTokens",
          "type": "by_type"
        },
        {
          "path": "$[*].constraints.maxDurationMs",
          "type": "by_type"
        },
        {
          "path": "$[*].constraints.costBudgetUsd",
          "type": "by_type"
        },
        {
          "path": "$[*].status",
          "type": "by_regex",
          "value": "active|degraded|inactive"
        }
      ]
    }
  }
}
