# Domain Glossary — Atlasia AI Orchestrator

Standardized terminology for the Atlasia platform. All agents, documentation, and UI surfaces must use these definitions consistently.

## Core Concepts

- **Bolt**: A complete execution of the orchestrator pipeline for one GitHub issue. A bolt progresses through all agent steps (PM through Writer) and produces a Pull Request. Internal code uses `Run`/`RunEntity`; "bolt" is the user-facing term.

- **Agent**: A specialized LLM-powered step in the pipeline. Each agent has a defined role, inputs, outputs, and operational boundaries. Agents: PM, Qualifier, Architect, Developer, Tester, Writer.

- **Gem (Persona)**: A domain-expert AI personality used for interactive chat and code review. Four gems: Aabo (Security), Aksil (Code Quality), Imad (Infrastructure), Tiziri (Frontend/UX).

- **Artifact**: A structured output produced by an agent step. Stored as JSONB in the `ai_run_artifact` table. Examples: `ticket_plan.json`, `work_plan.json`, `architecture_notes.md`, `test_report.json`, `pr_url`.

## Workflow Terminology

- **Sequential Orchestration**: The pipeline pattern where specialized agents execute in linear order, each processing the structured output of the preceding step.

- **Quality Gate**: An automated verification checkpoint that must pass before the pipeline advances. Defined in `docs/QUALITY_GATES.md`. Includes CI verification, coverage thresholds, and security checks.

- **Escalation**: A human intervention request triggered when an agent encounters an unresolvable blocker. Produces an `escalation.json` artifact conforming to `ai/schemas/escalation.schema.json`. The workflow pauses until the human decides to PROCEED or ABORT.

- **Fix Loop**: An automated retry cycle for CI or E2E test failures. The tester agent diagnoses the failure, patches the code, and re-runs tests. Limits: max 3 CI iterations, max 2 E2E iterations. Exceeding limits triggers escalation.

- **Ticket Plan**: The PM agent's output — a structured breakdown of a GitHub issue into stories, acceptance criteria, risks, and suggested labels. Schema: `ai/schemas/ticket_plan.schema.json`.

- **Work Plan**: The Qualifier agent's output — refined requirements with edge cases, test data, branch name, and verification commands. Schema: `ai/schemas/work_plan.schema.json`.

## Architecture Terminology

- **Dual-Mode Architecture**: Atlasia operates in two modes: Code Mode (autonomous pipeline triggered by `ai:run` label) and Chat Mode (interactive dialogue with Gem personas).

- **Human-on-the-Loop (HOTL)**: The oversight paradigm where agents operate autonomously by default, with human engineers intervening only at escalation thresholds or boundary conditions. Contrasted with Human-in-the-Loop (HITL), where every step requires approval.

- **Chain of Thought (CoT)**: The explicit reasoning trace generated by the LLM during architectural and implementation decisions. Must be visible in the trace observability dashboard for debugging and audit.

- **Model Context Protocol (MCP)**: A secure, permission-aware framework for connecting LLMs with external data sources, tools, and development environments. Acts as a "USB-C for AI" — a universal bridge standardizing how agents connect to external systems without custom glue code. Configuration: `ai/mcp/servers.yaml` (registry), `ai/mcp/permissions.yaml` (access control), `ai/schemas/mcp_server.schema.json` (validation schema).

- **MCP Server**: A process or remote endpoint that exposes tools and resources to agents via the MCP protocol (JSON-RPC 2.0 over stdio or SSE transport). Examples: GitHub MCP, FileSystem MCP, PostgreSQL MCP. Registered in `ai/mcp/servers.yaml`.

- **MCP Tool**: A callable function exposed by an MCP server, discovered at runtime via the `initialize` handshake. Agents invoke tools using the JSON-RPC 2.0 schema provided by the server. Examples: `search_issues`, `read_file`, `git_commit`.

- **MCP Resource**: A data endpoint exposed by an MCP server, identified by a URI pattern (e.g., `repo://owner/repo/issues/*`, `file://${WORKSPACE_ROOT}/**`). Resources provide read-only access to structured data.

- **MCP Discovery Protocol**: The initialization phase where the orchestrator connects to each declared MCP server, calls the `initialize` method, and caches the returned tool/resource catalog. Agents must not hallucinate capabilities not returned by this handshake.

- **Just-in-Time Context**: The MCP-native pattern where agents fetch data on demand from MCP servers instead of receiving pre-loaded context in system prompts. Replaces static context injection with dynamic, scoped tool calls. Each agent's `context_mode: "just-in-time"` activates this behavior.

- **MCP Permission Matrix**: The access control layer (`ai/mcp/permissions.yaml`) mapping each agent and persona to the MCP servers and specific tools they may access. Enforces the Principle of Least Privilege — agents receive only the tools needed for their role.

- **Requires Confirmation**: An MCP tool metadata tag indicating that the tool performs a high-stakes action (e.g., `git_push`, `create_pull_request`). Tools with this tag must be presented to the human user for approval before execution, enforcing Human-in-the-Loop for destructive operations.

- **Secret Masking**: The MCP security mechanism that resolves `${VAR}` references at runtime and ensures secret values (API keys, tokens, database credentials) never appear in agent context windows, logs, or artifacts.

## Observability Terminology

- **Correlation ID**: A UUID propagated through MDC (Mapped Diagnostic Context) for distributed tracing across the workflow. Generated at workflow start, included in all log entries, and returned in `X-Correlation-ID` response headers.

- **Neural Trace**: The frontend visualization of the orchestration pipeline's execution flow. Displays agent nodes, connections, and active status as an interactive graph.

- **Waterfall Trace**: A hierarchical view of workflow execution showing nested spans (agent steps, LLM calls, schema validations) with duration bars, similar to browser DevTools Network tab.

## Invariants

- A bolt cannot modify files outside the repository allowlist (`backend/`, `frontend/`, `docs/`, `infra/`, `ai/`).
- A bolt cannot modify `.github/workflows/` without human escalation.
- A bolt cannot commit directly to `main` — a Pull Request is always required.
- CI fix loops are capped at 3 iterations; E2E fix loops at 2.
- Every agent artifact must validate against its JSON schema (when one exists).
